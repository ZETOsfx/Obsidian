До применения методов работы с виртуальной памятью не было возможности загружать программу в ОП начиная с 0-го адреса. 

Адресное пространство программы физически могло превышать максимальный объем. 

Было решено полное адресное пространство разделить пополам:
- Адресное пространство прикладного процесса
- Адресное пространство ядра 

---
### Идея возникновения кэша

![[ОС4-1.png | 600]]

С точки зрения доступа к памяти обращаться к часто используемой информации в ОП слишком затратно. Скорость доступа к данным программ резко падает. В старых машинах была попытка решить данную проблему при помощи сверхоперативной памяти. На сегодня пришли к мнению, что это сильно усложняет программирование, поэтому **данную проблему призван решать кэш**.

![[ОС4-2.png | 600]]

**Кэш** - способ организации работы двух типо памяти (более быстрой и более медленной), причем часто именно более быструю память называют кэшем. 

Нужно, чтобы в кэш оседали наиболее часто используемые в ходе работы данные. При этом данную работу должна выполнять не сама программа (программам должно быть все равно). 

С точки зрения работы процессора и оперативной памяти наличие кэша никак не сказывается на том, как работает программа, которую они должны выполнять. 

---
### Как работает кэш

Процессор как и ранее обращается к ОП за данными программы. Кэш перехватывает данный запрос и начинает одновременно его обрабатывать. 

Если в кэше вдруг оказываются данные, которые запросил процессор, он отправляет их ему, а запрос к ОП блокируется. 

Если же с кэше нет данных, запрашиваемых ЦП, то происходит простое обращение к ОП, после которого данные, которые будут подгружены, сохраняются в кэш. 

![[ОС4-4.png | 600]]

Кэш, использующий одновременный запрос ко всем собственным ячейкам при запросе и поиске данных, называется **кэшем со случайным размещением**.

Кэш, использующий разбиение на детерминированные области с проверкой размещения по адресу (младший разряд + старший) - **кэш с детерминированным размещением**. 

---
#### Замещение данных кэша

Обратная запись предполагает проверку наличия данных в кэше.
Если данные отсутствуют к кэше, то предоставление данных происходит только в ЦП. 
В ином случае замена идет только в кэш. 

При этом в кэше скапливаются "грязные данные" и нужно производить выгрузки при помощи алгоритма выталкивания кэша, который будет гарантировать, что данные блоки / страницы, которые точно не пригодятся в ближайшее время. 

**Многоуровневый кэш** представляет собой иерархию, в который кэши более низких уровней представляют собой кэш для устройств кэшей более высоких уровней. 

![[ОС4-5.png | 600]]

---

Next door: [[Семестр 7/Операционные системы/ОС - Лекция 5]]
